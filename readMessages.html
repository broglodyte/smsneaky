<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <title>Read Messages</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js">
</script> <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js">
</script> <script>
$( function() {
	$( "#accordion" ).accordion({
		collapsible: true
	});
} );

var msgDict = {};

$(document).ready( function() {
	$.getJSON("/inbox", function(result) {
		jsonData = result;
		
		$.each(jsonData, (index, message) => {
			var sender = message.sender|| 'Unknown';
			var senderMsgList;
			
			if(!msgDict[sender])
				msgDict[sender] = [];
			
			//senderMsgList = msgDict[sender];
			msgDict[sender].push({
				_id  : message._id,
				type : message.type,
				data : message.data,
				timestamp : message.timestamp,
				datetime  : message.datetime
			});
		});
	});
});
    </script>
</head>

<body>
	<div id="accordion">
	
	
	</div>
</body>
</html>
